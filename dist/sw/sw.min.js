!function(a,b){if("function"==typeof define&&define.amd)define([],b);else if("undefined"!=typeof exports)b();else{var c={exports:{}};b(),a.PushServiceWorker=c.exports}}(this,function(){"use strict";function a(a){var b=a.data&&a.data.text()?a.data.text():null;if(!b)return void console.log("Leanplum: Push received without payload, skipping display.");var g=JSON.parse(b);if(!g||!g.title||!g.tag)return void console.log("Leanplum: No options, title or tag/id received, skipping display.");g.data&&g.data.openAction&&g.data.openAction.hasOwnProperty(c)&&g.data.openAction[c]===d&&g.data.openAction.hasOwnProperty(e)&&(f[g.tag]=g.data.openAction[e]);var h=g.title;Reflect.deleteProperty(g,"title"),a.waitUntil(self.registration.showNotification(h,g))}function b(a){if(console.log("Leanplum: [Service Worker] Notification click received."),a.notification.close(),!a.notification||!a.notification.tag)return void console.log("Leanplum: No notification or tag/id received, skipping open action.");var b=a.notification.tag,c=f[b];if(!c)return void console.log("Leanplum: [Service Worker] No action defined, doing nothing.");Reflect.deleteProperty(f,"notificationId"),a.waitUntil(clients.openWindow(c))}var c="__name__",d="Open URL",e="URL",f={};self.addEventListener("push",a),self.addEventListener("notificationclick",b)});