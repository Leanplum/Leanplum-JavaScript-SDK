!function(e,i){if("function"==typeof define&&define.amd)define([],i);else if("undefined"!=typeof exports)i();else{i(),e.PushServiceWorker={}}}(this,function(){"use strict";var o="__name__",a={};self.addEventListener("push",function(e){var i=e.data&&e.data.text()?e.data.text():null;if(i){var t=JSON.parse(i);if(t&&t.title&&t.tag){t.data&&t.data.openAction&&t.data.openAction.hasOwnProperty(o)&&"Open URL"===t.data.openAction[o]&&t.data.openAction.hasOwnProperty("URL")&&(a[t.tag]=t.data.openAction.URL);var n=t.title;Reflect.deleteProperty(t,"title"),e.waitUntil(self.registration.showNotification(n,t))}else console.log("Leanplum: No options, title or tag/id received, skipping display.")}else console.log("Leanplum: Push received without payload, skipping display.")}),self.addEventListener("notificationclick",function(e){if(console.log("Leanplum: [Service Worker] Notification click received."),e.notification.close(),e.notification&&e.notification.tag){var i=e.notification.tag,t=a[i];t?(Reflect.deleteProperty(a,"notificationId"),e.waitUntil(clients.openWindow(t))):console.log("Leanplum: [Service Worker] No action defined, doing nothing.")}else console.log("Leanplum: No notification or tag/id received, skipping open action.")})});