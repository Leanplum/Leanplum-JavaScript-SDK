"use strict";function pushListener(a){var b=a.data&&a.data.text()?a.data.text():null;if(!b)return void console.log("Leanplum: Push received without payload, skipping display.");var c=JSON.parse(b);if(!c||!c.title||!c.tag)return void console.log("Leanplum: No options, title or tag/id received, skipping display.");c.data&&c.data.openAction&&c.data.openAction.hasOwnProperty(ACTION_NAME_KEY)&&c.data.openAction[ACTION_NAME_KEY]===OPEN_URL_ACTION&&c.data.openAction.hasOwnProperty(ARG_URL)&&(openActions[c.tag]=c.data.openAction[ARG_URL]);var d=c.title;Reflect.deleteProperty(c,"title"),a.waitUntil(self.registration.showNotification(d,c))}function notificationClickListener(a){if(console.log("Leanplum: [Service Worker] Notification click received."),a.notification.close(),!a.notification||!a.notification.tag)return void console.log("Leanplum: No notification or tag/id received, skipping open action.");var b=a.notification.tag,c=openActions[b];if(!c)return void console.log("Leanplum: [Service Worker] No action defined, doing nothing.");Reflect.deleteProperty(openActions,"notificationId"),a.waitUntil(clients.openWindow(c))}var ACTION_NAME_KEY="__name__",OPEN_URL_ACTION="Open URL",ARG_URL="URL",openActions={};self.addEventListener("push",pushListener),self.addEventListener("notificationclick",notificationClickListener);