!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.Leanplum=t():e.Leanplum=t()}(window,function(){return r={},o.m=n=[function(e,t,n){var r=n(19),o="object"==typeof self&&self&&self.Object===Object&&self,a=r||o||Function("return this")();e.exports=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={METHODS:{START:"start",STOP:"stop",ADVANCE:"advance",TRACK:"track",PAUSE_SESSION:"pauseSession",RESUME_SESSION:"resumeSession",PAUSE_STATE:"pauseState",RESUME_STATE:"resumeState",DOWNLOAD_FILE:"downloadFile",MULTI:"multi",SET_VARS:"setVars",GET_VARS:"getVars",SET_USER_ATTRIBUTES:"setUserAttributes",SET_DEVICE_ATTRIBUTES:"setDeviceAttributes",UPLOAD_FILE:"uploadFile",REGISTER_DEVICE:"registerDevice"},SDK_VERSION:"1.4.0",CLIENT:"js",PARAMS:{ACTION:"action",APP_ID:"appId",CLIENT:"client",CLIENT_KEY:"clientKey",DEVICE_ID:"deviceId",SDK_VERSION:"sdkVersion",USER_ID:"userId",NEW_USER_ID:"newUserId",DEV_MODE:"devMode",VERSION_NAME:"versionName",SYSTEM_NAME:"systemName",SYSTEM_VERSION:"systemVersion",BROWSER_NAME:"browserName",BROWSER_VERSION:"browserVersion",DEVICE_NAME:"deviceName",DEVICE_MODEL:"deviceModel",USER_ATTRIBUTES:"userAttributes",LOCALE:"locale",COUNTRY:"country",REGION:"region",CITY:"city",LOCATION:"location",STATE:"state",INFO:"info",EVENT:"event",VALUE:"value",FILENAME:"filename",TIME:"time",DATA:"data",VARS:"vars",FILE:"file",SIZE:"size",VARIATION:"variation",HASH:"hash",EMAIL:"email",VARIABLES:"vars",PARAMS:"params",INCLUDE_DEFAULTS:"includeDefaults",INCLUDE_VARIANT_DEBUG_INFO:"includeVariantDebugInfo",WEB_PUSH_SUBSCRIPTION:"webPushSubscription"},KEYS:{IS_REGISTERED:"isRegistered",LATEST_VERSION:"latestVersion",VARS:"vars",VARIANTS:"variants",VARIANT_DEBUG_INFO:"variantDebugInfo",ACTION_METADATA:"actionMetadata",TOKEN:"token"},DEFAULT_KEYS:{COUNT:"__leanplum_unsynced",ITEM:"__leanplum_unsynced_",VARIABLES:"__leanplum_variables",VARIANTS:"__leanplum_variants",VARIANT_DEBUG_INFO:"__leanplum_variant_debug_info",ACTION_METADATA:"__leanplum_action_metadata",TOKEN:"__leanplum_token",DEVICE_ID:"__leanplum_device_id",USER_ID:"__leanplum_user_id",PUSH_SUBSCRIPTION:"__leanplum_push_subscription"},VALUES:{DETECT:"(detect)"}}},function(e,t,n){var r=n(47),o=n(53);e.exports=function(e,t){var n=o(e,t);return r(n)?n:void 0}},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=r(n(1)),a=(u.prototype.add=function(e,t){if(void 0===t)return this;this.argString&&(this.argString+="&");var n=encodeURIComponent(t);return this.argString+=e+"="+n,this.argValues[e]=t,this},u.prototype.body=function(e){return e?(this._body=e,this):this._body},u.prototype.attachApiKeys=function(e,t){return this.add(o.default.PARAMS.APP_ID,e).add(o.default.PARAMS.CLIENT,o.default.CLIENT).add(o.default.PARAMS.CLIENT_KEY,t)},u.prototype.build=function(){return this.argString},u.prototype.buildDict=function(){return this.argValues},u);function u(){this.argString="",this.argValues={}}t.default=a},function(e,t,n){var r=n(37),o=n(38),a=n(39),u=n(40),i=n(41);function s(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}s.prototype.clear=r,s.prototype.delete=o,s.prototype.get=a,s.prototype.has=u,s.prototype.set=i,e.exports=s},function(e,t,n){var r=n(17);e.exports=function(e,t){for(var n=e.length;n--;)if(r(e[n][0],t))return n;return-1}},function(e,t,n){var r=n(14),o=n(49),a=n(50),u=r?r.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":(u&&u in Object(e)?o:a)(e)}},function(e,t,n){var r=n(2)(Object,"create");e.exports=r},function(e,t,n){var r=n(62);e.exports=function(e,t){var n=e.__data__;return r(t)?n["string"==typeof t?"string":"hash"]:n.map}},function(e,t){e.exports=function(e){return null!=e&&"object"==typeof e}},function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0});var o={},a=(u.getFromLocalStorage=function(e){return!1===r?o[e]:localStorage[e]},u.saveToLocalStorage=function(t,n){if(!1!==r)try{localStorage[t]=n}catch(e){r=!1,o[t]=n}else o[t]=n},u.removeFromLocalStorage=function(t){if(!1!==r)try{localStorage.removeItem(t)}catch(e){r=!1,delete o[t]}else delete o[t]},u);function u(){}t.default=a},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var p=r(n(1)),v=r(n(3)),S=r(n(12)),g=r(n(28)),_=r(n(10)),b=void 0,h=null,o=(A.request=function(e,t,r){if(r=r||{},t=t||new v.default,A.deviceId||(A.deviceId=_.default.getFromLocalStorage(p.default.DEFAULT_KEYS.DEVICE_ID)),!A.deviceId){for(var n="",o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",a=0;a<16;a++)n+=o.charAt(Math.floor(Math.random()*o.length));A.deviceId=n,_.default.saveToLocalStorage(p.default.DEFAULT_KEYS.DEVICE_ID,n)}A.userId||(A.userId=_.default.getFromLocalStorage(p.default.DEFAULT_KEYS.USER_ID))||(A.userId=A.deviceId),_.default.saveToLocalStorage(p.default.DEFAULT_KEYS.USER_ID,A.userId);var u=t.attachApiKeys(A.appId,A.clientKey).add(p.default.PARAMS.SDK_VERSION,p.default.SDK_VERSION).add(p.default.PARAMS.DEVICE_ID,A.deviceId).add(p.default.PARAMS.USER_ID,A.userId).add(p.default.PARAMS.ACTION,e).add(p.default.PARAMS.VERSION_NAME,A.versionName).add(p.default.PARAMS.DEV_MODE,S.default.devMode).add(p.default.PARAMS.TIME,((new Date).getTime()/1e3).toString()),i=r.success||r.response,s=r.error||r.response;if(!A.appId||!A.clientKey){var f="Leanplum App ID and client key are not set. Make sure you are calling setAppIdForDevelopmentMode or setAppIdForProductionMode before issuing API calls.";return console.error(f),void(s&&s(f))}if(t.body())g.default.ajax("POST",A.apiPath+"?"+u.build(),t.body(),i,s,r.queued);else{var c=S.default.devMode||r.sendNow||!A.batchEnabled,l=function(){var e=A.popUnsentRequests();if(0<e.length){var t=JSON.stringify({data:e}),n=(new v.default).attachApiKeys(A.appId,A.clientKey).add(p.default.PARAMS.SDK_VERSION,p.default.SDK_VERSION).add(p.default.PARAMS.ACTION,p.default.METHODS.MULTI).add(p.default.PARAMS.TIME,((new Date).getTime()/1e3).toString().toString()).build();g.default.ajax("POST",A.apiPath+"?"+n,t,i,s,r.queued)}};if(!c&&A.batchCooldown){var d=(new Date).getTime()/1e3;!b||A.batchCooldown<=d-b?(c=!0,b=d):h=h||setTimeout(function(){h=null,b=(new Date).getTime()/1e3,l()},1e3*(A.batchCooldown-(d-b)))}A.saveRequestForLater(u.buildDict()),c&&l()}},A.setNetworkTimeout=function(e){g.default.setNetworkTimeout(e)},A.saveRequestForLater=function(e){var t=_.default.getFromLocalStorage(p.default.DEFAULT_KEYS.COUNT)||0,n=p.default.DEFAULT_KEYS.ITEM+t;_.default.saveToLocalStorage(n,JSON.stringify(e)),t++,_.default.saveToLocalStorage(p.default.DEFAULT_KEYS.COUNT,t)},A.popUnsentRequests=function(){var e=[],t=_.default.getFromLocalStorage(p.default.DEFAULT_KEYS.COUNT)||0;_.default.removeFromLocalStorage(p.default.DEFAULT_KEYS.COUNT);for(var n=0;n<t;n++){var r=p.default.DEFAULT_KEYS.ITEM+n;try{var o=JSON.parse(_.default.getFromLocalStorage(r));e.push(o)}catch(e){}_.default.removeFromLocalStorage(r)}return e},A.numResponses=function(e){return e&&e.response?e.response.length:0},A.getResponseAt=function(e,t){return e&&e.response?e.response[t]:null},A.getLastResponse=function(e){var t=A.numResponses(e);return 0<t?A.getResponseAt(e,t-1):null},A.isResponseSuccess=function(e){return!!e&&!!e.success},A.getResponseError=function(e){if(!e)return null;var t=e.error;return t?t.message:null},A.apiPath="https://www.leanplum.com/api",A.batchEnabled=!0,A.batchCooldown=5,A);function A(){}t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=(o.addStartResponseHandler=function(e){o.startHandlers.push(e),o.hasStarted&&e(o.startSuccessful)},o.removeStartResponseHandler=function(e){var t=o.startHandlers.indexOf(e);0<=t&&o.startHandlers.splice(t,1)},o.triggerStartHandlers=function(){for(var e=0;e<o.startHandlers.length;e++)o.startHandlers[e](o.startSuccessful)},o.addVariablesChangedHandler=function(e){o.variablesChangedHandlers.push(e),o.hasReceivedDiffs&&e()},o.removeVariablesChangedHandler=function(e){var t=o.variablesChangedHandlers.indexOf(e);0<=t&&o.variablesChangedHandlers.splice(t,1)},o.triggerVariablesChangedHandlers=function(){for(var e=0;e<o.variablesChangedHandlers.length;e++)o.variablesChangedHandlers[e]()},o.setVariantDebugInfoEnabled=function(e){o.variantDebugInfoEnabled=e},o.devMode=!1,o.variablesChangedHandlers=[],o.hasReceivedDiffs=!1,o.startHandlers=[],o.hasStarted=!1,o.startSuccessful=!1,o.variantDebugInfoEnabled=!1,o);function o(){}t.default=r},function(e,t,n){var r=n(2)(n(0),"Map");e.exports=r},function(e,t,n){var r=n(0).Symbol;e.exports=r},function(e,t){var n=Array.isArray;e.exports=n},function(e,t,n){var r=n(34);e.exports=function(e,t){return r(e,t)}},function(e,t){e.exports=function(e,t){return e===t||e!=e&&t!=t}},function(e,t,n){var r=n(6),o=n(20);e.exports=function(e){if(!o(e))return!1;var t=r(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}},function(n,e,t){(function(e){var t="object"==typeof e&&e&&e.Object===Object&&e;n.exports=t}).call(this,t(48))},function(e,t){e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},function(e,t){var n=Function.prototype.toString;e.exports=function(e){if(null!=e){try{return n.call(e)}catch(e){}try{return e+""}catch(e){}}return""}},function(e,t,n){var r=n(54),o=n(61),a=n(63),u=n(64),i=n(65);function s(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}s.prototype.clear=r,s.prototype.delete=o,s.prototype.get=a,s.prototype.has=u,s.prototype.set=i,e.exports=s},function(e,t,n){var g=n(66),_=n(69),b=n(70);e.exports=function(e,t,n,r,o,a){var u=1&n,i=e.length,s=t.length;if(i!=s&&!(u&&i<s))return!1;var f=a.get(e);if(f&&a.get(t))return f==t;var c=-1,l=!0,d=2&n?new g:void 0;for(a.set(e,t),a.set(t,e);++c<i;){var p=e[c],v=t[c];if(r)var S=u?r(v,p,c,t,e,a):r(p,v,c,e,t,a);if(void 0!==S){if(S)continue;l=!1;break}if(d){if(!_(t,function(e,t){if(!b(d,t)&&(p===e||o(p,e,n,r,a)))return d.push(t)})){l=!1;break}}else if(p!==v&&!o(p,v,n,r,a)){l=!1;break}}return a.delete(e),a.delete(t),l}},function(e,i,s){(function(e){var t=s(0),n=s(87),r=i&&!i.nodeType&&i,o=r&&"object"==typeof e&&e&&!e.nodeType&&e,a=o&&o.exports===r?t.Buffer:void 0,u=(a?a.isBuffer:void 0)||n;e.exports=u}).call(this,s(25)(e))},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,n){var r=n(89),o=n(90),a=n(91),u=a&&a.isTypedArray,i=u?o(u):r;e.exports=i},function(e,t){e.exports=function(e){return"number"==typeof e&&-1<e&&e%1==0&&e<=9007199254740991}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var f=Function.prototype.apply,r=[],c=10,o=(l.setNetworkTimeout=function(e){c=e},l.ajax=function(e,t,n,r,o,a,u){if(a){if(l.runningRequest)return l.enqueueRequest(arguments);l.runningRequest=!0}if("undefined"!=typeof XDomainRequest)return"http:"===location.protocol&&0===t.indexOf("https:")&&(t="http:"+t.substring(6)),f.call(l.ajaxIE8,null,arguments);var i=!1,s=new XMLHttpRequest;s.onreadystatechange=function(){if(4===s.readyState){if(i)return;var e,t=!(i=!0);if(u)e=s.responseText;else try{e=JSON.parse(s.responseText)}catch(e){setTimeout(function(){o&&o(null,s)},0),t=!0}t||(200<=s.status&&s.status<300?setTimeout(function(){r&&r(e,s)},0):setTimeout(function(){o&&o(e,s)},0)),a&&(l.runningRequest=!1,l.dequeueRequest())}},s.open(e,t,!0),s.setRequestHeader("Content-Type","text/plain"),s.send(n),setTimeout(function(){i||s.abort()},1e3*c)},l.ajaxIE8=function(e,t,n,r,o,a,u){var i=new XDomainRequest;i.onload=function(){var e,t=!1;if(u)e=i.responseText;else try{e=JSON.parse(i.responseText)}catch(e){setTimeout(function(){o&&o(null,i)},0),t=!0}t||setTimeout(function(){r&&r(e,i)},0),a&&(l.runningRequest=!1,l.dequeueRequest())},i.onerror=i.ontimeout=function(){setTimeout(function(){o&&o(null,i)},0),a&&(l.runningRequest=!1,l.dequeueRequest())},i.onprogress=function(){},i.open(e,t),i.timeout=1e3*c,i.send(n)},l.enqueueRequest=function(e){r.push(e)},l.dequeueRequest=function(){var e=r.shift();e&&f.call(l.ajax,null,e)},l.runningRequest=!1,l);function l(){}t.default=o},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=r(n(1)),a=r(n(12)),u=r(n(3)),i=r(n(10)),s=r(n(11)),f=(c.applyDiffs=function(e,t,n){c.diffs=e,c.variants=t,c.actionMetadata=n,a.default.hasReceivedDiffs=!0,c.merged=c.mergeHelper(c.variables,e),c.saveDiffs(),c.onUpdate&&c.onUpdate()},c.loadDiffs=function(){try{c.applyDiffs(JSON.parse(i.default.getFromLocalStorage(o.default.DEFAULT_KEYS.VARIABLES)||null),JSON.parse(i.default.getFromLocalStorage(o.default.DEFAULT_KEYS.VARIANTS)||null),JSON.parse(i.default.getFromLocalStorage(o.default.DEFAULT_KEYS.ACTION_METADATA)||null)),c.token=i.default.getFromLocalStorage(o.default.DEFAULT_KEYS.TOKEN),c.variantDebugInfo=i.default.getFromLocalStorage(o.default.DEFAULT_KEYS.VARIANT_DEBUG_INFO)}catch(e){console.log("Leanplum: Invalid diffs: "+e)}},c.saveDiffs=function(){i.default.saveToLocalStorage(o.default.DEFAULT_KEYS.VARIABLES,JSON.stringify(c.diffs||{})),i.default.saveToLocalStorage(o.default.DEFAULT_KEYS.VARIANTS,JSON.stringify(c.variants||[])),i.default.saveToLocalStorage(o.default.DEFAULT_KEYS.ACTION_METADATA,JSON.stringify(c.actionMetadata||{})),i.default.saveToLocalStorage(o.default.DEFAULT_KEYS.VARIANT_DEBUG_INFO,JSON.stringify(c.variantDebugInfo||{})),i.default.saveToLocalStorage(o.default.DEFAULT_KEYS.TOKEN,c.token)},c.setVariables=function(e){c.variables=e},c.getVariables=function(){return void 0!==c.merged?c.merged:c.variables},c.getVariantDebugInfo=function(){return c.variantDebugInfo},c.sendVariables=function(){var e={};e[o.default.PARAMS.VARIABLES]=c.variables,s.default.request(o.default.METHODS.SET_VARS,(new u.default).body(JSON.stringify(e)),{sendNow:!0})},c.mergeHelper=function(t,r){if("number"==typeof r||"boolean"==typeof r||"string"==typeof r)return r;if(null==r)return t;function e(r){return function(e){if(r instanceof Array)for(var t=0;t<r.length;t++)e(r[t]);else for(var n in r)!{}.hasOwnProperty.call(r,n)||e(n)}}var n=e(t),o=e(r),a=!1;if(null===t&&!(r instanceof Array))for(var u in a=null,r)if(r.hasOwnProperty(u)){if(null===a&&(a=!0),"string"!=typeof u){a=!1;break}if(u.length<3||"["!==u.charAt(0)||"]"!==u.charAt(u.length-1)){a=!1;break}}if(t instanceof Array||a){var i=[];return n(function(e){i.push(e)}),o(function(e){for(var t=parseInt(e.substring(1,e.length-1)),n=r[e];t>=i.length;)i.push(null);i[t]=c.mergeHelper(i[t],n)}),i}var s={};return n(function(e){null!==r[e]&&void 0!==r[e]||(s[e]=t[e])}),o(function(e){s[e]=c.mergeHelper(null!==t?t[e]:null,r[e])}),s},c.clearUserContent=function(){c.diffs=void 0,c.variables=null,c.variants=[],c.variantDebugInfo={},c.merged=void 0},c.diffs=void 0,c.variables=null,c.variants=[],c.variantDebugInfo={},c.merged=void 0,c.onUpdate=void 0,c.token="",c.actionMetadata={},c);function c(){}t.default=f},function(e,t,n){var r=n(31);e.exports=r.default},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=r(n(1)),a=r(n(12)),u=r(n(3)),i=r(n(32)),s=r(n(33)),f=r(n(10)),c=r(n(29)),l=r(n(11)),d=r(n(102)),p=new i.default,v=(S.setApiPath=function(e){l.default.apiPath&&(l.default.apiPath=e)},S.setEmail=function(e){S._email=e},S.setNetworkTimeout=function(e){l.default.setNetworkTimeout(e)},S.setVariantDebugInfoEnabled=function(e){a.default.setVariantDebugInfoEnabled(e)},S.getVariantDebugInfo=function(){return c.default.getVariantDebugInfo()},S.setAppIdForDevelopmentMode=function(e,t){l.default.appId=e,l.default.clientKey=t,a.default.devMode=!0},S.setAppIdForProductionMode=function(e,t){l.default.appId=e,l.default.clientKey=t,a.default.devMode=!1},S.setSocketHost=function(e){d.default.socketHost=e},S.setDeviceId=function(e){l.default.deviceId=e},S.setAppVersion=function(e){l.default.versionName=e},S.setDeviceName=function(e){S._deviceName=e},S.setDeviceModel=function(e){S._deviceModel=e},S.setSystemName=function(e){S._systemName=e},S.setSystemVersion=function(e){S._systemVersion=e},S.setVariables=function(e){c.default.setVariables(e)},S.setRequestBatching=function(e,t){l.default.batchEnabled=e,l.default.batchCooldown=t},S.getVariables=function(){return c.default.getVariables()},S.getVariable=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=S.getVariables(),r=0;r<e.length;r++)n=n[e[r]];return n},S.getVariants=function(){return c.default.variants||[]},S.addStartResponseHandler=function(e){a.default.addStartResponseHandler(e)},S.__destroy=function(){l.default.apiPath="https://www.leanplum.com/api",l.default.batchEnabled=!0,l.default.batchCooldown=5,l.default.deviceId=void 0,l.default.userId=void 0,l.default.appId=void 0,l.default.clientKey=void 0,l.default.versionName=void 0,a.default.devMode=!1,a.default.variablesChangedHandlers=[],a.default.hasReceivedDiffs=!1,a.default.startHandlers=[],a.default.hasStarted=!1,a.default.startSuccessful=!1,a.default.variantDebugInfoEnabled=!1,c.default.diffs=void 0,c.default.variables=null,c.default.variants=[],c.default.variantDebugInfo={},c.default.merged=void 0,c.default.onUpdate=void 0,c.default.token="",c.default.actionMetadata={}},S.addVariablesChangedHandler=function(e){a.default.addVariablesChangedHandler(e)},S.removeStartResponseHandler=function(e){a.default.removeStartResponseHandler(e)},S.removeVariablesChangedHandler=function(e){a.default.removeVariablesChangedHandler(e)},S.forceContentUpdate=function(r){l.default.request(o.default.METHODS.GET_VARS,(new u.default).add(o.default.PARAMS.INCLUDE_DEFAULTS,!1).add(o.default.PARAMS.INCLUDE_VARIANT_DEBUG_INFO,a.default.variantDebugInfoEnabled),{queued:!1,sendNow:!0,response:function(e){var t=l.default.getLastResponse(e),n=l.default.isResponseSuccess(t);n&&(c.default.applyDiffs(t[o.default.KEYS.VARS],t[o.default.KEYS.VARIANTS],t[o.default.KEYS.ACTION_METADATA]),c.default.variantDebugInfo=t[o.default.KEYS.VARIANT_DEBUG_INFO]),r&&r(n)}})},S.start=function(e,t,n){"function"==typeof e?(n=e,t={},e=null):"object"==typeof e&&null!=e?(n=t,t=e,e=null):"function"==typeof t&&(n=t,t={}),l.default.userId=e,n&&S.addStartResponseHandler(n),c.default.onUpdate=function(){a.default.triggerVariablesChangedHandlers()};var r=(new u.default).add(o.default.PARAMS.USER_ATTRIBUTES,JSON.stringify(t)).add(o.default.PARAMS.COUNTRY,o.default.VALUES.DETECT).add(o.default.PARAMS.REGION,o.default.VALUES.DETECT).add(o.default.PARAMS.CITY,o.default.VALUES.DETECT).add(o.default.PARAMS.LOCATION,o.default.VALUES.DETECT).add(o.default.PARAMS.SYSTEM_NAME,S._systemName||p.OS).add(o.default.PARAMS.SYSTEM_VERSION,(S._systemVersion||"").toString()).add(o.default.PARAMS.BROWSER_NAME,p.browser).add(o.default.PARAMS.BROWSER_VERSION,p.version.toString()).add(o.default.PARAMS.LOCALE,o.default.VALUES.DETECT).add(o.default.PARAMS.DEVICE_NAME,S._deviceName||p.browser+" "+p.version).add(o.default.PARAMS.DEVICE_MODEL,S._deviceModel||"Web Browser").add(o.default.PARAMS.INCLUDE_DEFAULTS,!1).add(o.default.PARAMS.INCLUDE_VARIANT_DEBUG_INFO,a.default.variantDebugInfoEnabled);l.default.request(o.default.METHODS.START,r,{queued:!0,sendNow:!0,response:function(e){a.default.hasStarted=!0;var t=l.default.getLastResponse(e);if(l.default.isResponseSuccess(t)){if(a.default.startSuccessful=!0,a.default.devMode){var n=t[o.default.KEYS.LATEST_VERSION];n&&console.log("A newer version of Leanplum, "+n+', is available.\nUse "npm update leanplum-sdk" or go to https://docs.leanplum.com/reference#javascript-setup to download it.'),d.default.connect()}c.default.applyDiffs(t[o.default.KEYS.VARS],t[o.default.KEYS.VARIANTS],t[o.default.KEYS.ACTION_METADATA]),c.default.variantDebugInfo=t[o.default.KEYS.VARIANT_DEBUG_INFO],c.default.token=t[o.default.KEYS.TOKEN]}else a.default.startSuccessful=!1,c.default.loadDiffs();a.default.triggerStartHandlers()}})},S.startFromCache=function(e,t,n){"function"==typeof e?(n=e,t={},e=null):"object"==typeof e&&null!=e?(n=t,t=e,e=null):"function"==typeof t&&(n=t,t={}),l.default.userId=e,n&&S.addStartResponseHandler(n),a.default.hasStarted=!0,a.default.startSuccessful=!0,a.default.devMode&&d.default.connect(),c.default.loadDiffs(),a.default.triggerStartHandlers()},S.stop=function(){l.default.request(o.default.METHODS.STOP,void 0,{sendNow:!0,queued:!0})},S.pauseSession=function(){l.default.request(o.default.METHODS.PAUSE_SESSION,void 0,{sendNow:!0,queued:!0})},S.resumeSession=function(){l.default.request(o.default.METHODS.RESUME_SESSION,void 0,{sendNow:!0,queued:!0})},S.pauseState=function(){l.default.request(o.default.METHODS.PAUSE_STATE,void 0,{queued:!0})},S.resumeState=function(){l.default.request(o.default.METHODS.RESUME_STATE,void 0,{queued:!0})},S.setUserId=function(e){S.setUserAttributes(e)},S.setUserAttributes=function(e,t){if(void 0===t)if("object"==typeof e)t=e,e=void 0;else if("string"!=typeof e)return void console.log("Leanplum: setUserAttributes expects a string or an object");l.default.request(o.default.METHODS.SET_USER_ATTRIBUTES,(new u.default).add(o.default.PARAMS.USER_ATTRIBUTES,t?JSON.stringify(t):void 0).add(o.default.PARAMS.NEW_USER_ID,e),{queued:!0}),e&&(l.default.userId=e,f.default.saveToLocalStorage(o.default.DEFAULT_KEYS.USER_ID,l.default.userId))},S.track=function(e,t,n,r){"object"==typeof t&&null!=t?(r=t,t=n=void 0):"string"==typeof t?(r=n,n=t,t=void 0):"object"==typeof n&&null!=n&&(r=n,n=void 0),l.default.request(o.default.METHODS.TRACK,(new u.default).add(o.default.PARAMS.EVENT,e).add(o.default.PARAMS.VALUE,t||0).add(o.default.PARAMS.INFO,n).add(o.default.PARAMS.PARAMS,JSON.stringify(r)),{queued:!0})},S.advanceTo=function(e,t,n){"object"==typeof t&&null!=t&&(n=t,t=void 0),l.default.request(o.default.METHODS.ADVANCE,(new u.default).add(o.default.PARAMS.STATE,e).add(o.default.PARAMS.INFO,t).add(o.default.PARAMS.PARAMS,JSON.stringify(n)),{queued:!0})},S.isWebPushSupported=function(){return s.default.isWebPushSupported()},S.isWebPushSubscribed=function(){return s.default.isWebPushSubscribed()},S.registerForWebPush=function(n){return new Promise(function(t,e){return s.default.isWebPushSupported()?s.default.register(n,function(e){return e?t(!0):s.default.subscribeUser()}):e("Leanplum: WebPush is not supported.")})},S.unregisterFromWebPush=function(){return s.default.unsubscribeUser()},S.clearUserContent=function(){c.default.clearUserContent()},S);function S(){}t.default=v},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=[{string:navigator.userAgent,subString:"Chrome",identity:"Chrome"},{string:navigator.userAgent,subString:"OmniWeb",versionSearch:"OmniWeb/",identity:"OmniWeb"},{string:navigator.vendor,subString:"Apple",identity:"Safari",versionSearch:"Version"},{prop:window.opera,identity:"Opera",versionSearch:"Version"},{string:navigator.vendor,subString:"iCab",identity:"iCab"},{string:navigator.vendor,subString:"KDE",identity:"Konqueror"},{string:navigator.userAgent,subString:"Firefox",identity:"Firefox"},{string:navigator.vendor,subString:"Camino",identity:"Camino"},{string:navigator.userAgent,subString:"Netscape",identity:"Netscape"},{string:navigator.userAgent,subString:"MSIE",identity:"Explorer",versionSearch:"MSIE"},{string:navigator.userAgent,subString:"Gecko",identity:"Mozilla",versionSearch:"rv"},{string:navigator.userAgent,subString:"Mozilla",identity:"Netscape",versionSearch:"Mozilla"}],o=[{string:navigator.platform,subString:"Win",identity:"Windows"},{string:navigator.platform,subString:"Mac",identity:"Mac OS"},{string:navigator.userAgent,subString:"iPhone",identity:"iOS"},{string:navigator.userAgent,subString:"Android",identity:"Android"},{string:navigator.platform,subString:"Linux",identity:"Linux"}],a=(u.prototype._searchString=function(e){for(var t=0;t<e.length;t++){var n=e[t].string,r=e[t].prop;if(this.versionSearchString=e[t].versionSearch||e[t].identity,n){if(-1!==n.indexOf(e[t].subString))return e[t].identity}else if(r)return e[t].identity}},u.prototype._searchVersion=function(e){if(!e)return-1;var t=e.indexOf(this.versionSearchString);return-1===t?-1:parseFloat(e.substring(t+this.versionSearchString.length+1))},u);function u(){this.browser=this._searchString(r)||"Unknown Browser",this.version=this._searchVersion(navigator.userAgent)||this._searchVersion(navigator.appVersion)||"Unknown Version",this.OS=this._searchString(o)||"Unknown OS"}t.default=a},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=r(n(1)),a=r(n(3)),u=r(n(16)),i=r(n(10)),s=r(n(11)),f=!1,c=null,l=(d.isWebPushSupported=function(){return navigator&&navigator.serviceWorker&&"serviceWorker"in navigator&&"PushManager"in window},d.isWebPushSubscribed=function(){return d.isWebPushSupported()?d.getServiceWorkerRegistration().then(function(e){return new Promise(function(t){e?e.pushManager.getSubscription().then(function(e){(f=null!==e)&&d.updateNewSubscriptionOnServer(e),t(f)}):t(!1)})}):new Promise(function(e){e(!1)})},d.register=function(e,t){if(!d.isWebPushSupported())return console.log("Leanplum: Push messaging is not supported."),t(!1);navigator.serviceWorker.register(e||"/sw.min.js",null).then(function(e){(c=e).pushManager.getSubscription().then(function(e){if((f=!(null===e))&&d.updateNewSubscriptionOnServer(e),t)return t(f)})}).catch(function(e){console.log("Leanplum: Service Worker Error: ",e)})},d.subscribeUser=function(){var e=d.urlB64ToUint8Array("BInWPpWntfR39rgXSP04pqdmEdDGa50z6zqbMvxyxJCwzXIuSpSh8C888-CfJ82WELl7Xe8cjAnfCt-3vK0Ci68");return new Promise(function(t,n){return c.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:e}).then(function(e){return e?(d.updateNewSubscriptionOnServer(e),t(f=!0)):(f=!1,n())}).catch(function(e){return n("Leanplum: Failed to subscribe the user: "+e)})})},d.unsubscribeUser=function(){return new Promise(function(t,n){d.isWebPushSubscribed().then(function(e){if(!e)return t();c.pushManager.getSubscription().then(function(e){return e?e.unsubscribe():n()}).catch(function(e){n("Leanplum: Error unsubscribing: "+e)}).then(function(e){return e?(f=!1,t()):n()})},function(e){return n()})})},d.getServiceWorkerRegistration=function(){return new Promise(function(t){c?t(c):navigator.serviceWorker.getRegistration().then(function(e){t(c=e)})})},d.urlB64ToUint8Array=function(e){for(var t=(e+"=".repeat((4-e.length%4)%4)).replace(/-/g,"+").replace(/_/g,"/"),n=window.atob(t),r=new Uint8Array(n.length),o=0;o<n.length;++o)r[o]=n.charCodeAt(o);return r},d.prepareSubscription=function(e){var t=Function.prototype.apply,n=e.getKey?e.getKey("p256dh"):"",r=e.getKey?e.getKey("auth"):"",o=btoa(t.call(String.fromCharCode,null,new Uint8Array(n))),a=btoa(t.call(String.fromCharCode,null,new Uint8Array(r)));return{endpoint:e.endpoint,key:o,auth:a}},d.updateNewSubscriptionOnServer=function(e){if(e){var t=d.prepareSubscription(e),n=JSON.stringify(t),r=i.default.getFromLocalStorage(o.default.DEFAULT_KEYS.PUSH_SUBSCRIPTION);u.default(r,n)||(i.default.saveToLocalStorage(o.default.DEFAULT_KEYS.PUSH_SUBSCRIPTION,n),d.setSubscription(n))}},d.setSubscription=function(e){e&&s.default.request(o.default.METHODS.SET_DEVICE_ATTRIBUTES,(new a.default).add(o.default.PARAMS.WEB_PUSH_SUBSCRIPTION,e),{queued:!1,sendNow:!0})},d);function d(){}t.default=l},function(e,t,n){var u=n(35),i=n(9);e.exports=function e(t,n,r,o,a){return t===n||(null==t||null==n||!i(t)&&!i(n)?t!=t&&n!=n:u(t,n,r,o,e,a))}},function(e,t,n){var S=n(36),g=n(23),_=n(71),b=n(75),h=n(97),A=n(15),E=n(24),y=n(26),T="[object Object]",I=Object.prototype.hasOwnProperty;e.exports=function(e,t,n,r,o,a){var u=A(e),i=A(t),s=u?"[object Array]":h(e),f=i?"[object Array]":h(t),c=(s="[object Arguments]"==s?T:s)==T,l=(f="[object Arguments]"==f?T:f)==T,d=s==f;if(d&&E(e)){if(!E(t))return!1;c=!(u=!0)}if(d&&!c)return a=a||new S,u||y(e)?g(e,t,n,r,o,a):_(e,t,s,n,r,o,a);if(!(1&n)){var p=c&&I.call(e,"__wrapped__"),v=l&&I.call(t,"__wrapped__");if(p||v)return o(p?e.value():e,v?t.value():t,n,r,a=a||new S)}return!!d&&(a=a||new S,b(e,t,n,r,o,a))}},function(e,t,n){var r=n(4),o=n(42),a=n(43),u=n(44),i=n(45),s=n(46);function f(e){var t=this.__data__=new r(e);this.size=t.size}f.prototype.clear=o,f.prototype.delete=a,f.prototype.get=u,f.prototype.has=i,f.prototype.set=s,e.exports=f},function(e,t){e.exports=function(){this.__data__=[],this.size=0}},function(e,t,n){var r=n(5),o=Array.prototype.splice;e.exports=function(e){var t=this.__data__,n=r(t,e);return!(n<0||(n==t.length-1?t.pop():o.call(t,n,1),--this.size,0))}},function(e,t,n){var r=n(5);e.exports=function(e){var t=this.__data__,n=r(t,e);return n<0?void 0:t[n][1]}},function(e,t,n){var r=n(5);e.exports=function(e){return-1<r(this.__data__,e)}},function(e,t,n){var o=n(5);e.exports=function(e,t){var n=this.__data__,r=o(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this}},function(e,t,n){var r=n(4);e.exports=function(){this.__data__=new r,this.size=0}},function(e,t){e.exports=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}},function(e,t){e.exports=function(e){return this.__data__.get(e)}},function(e,t){e.exports=function(e){return this.__data__.has(e)}},function(e,t,n){var o=n(4),a=n(13),u=n(22);e.exports=function(e,t){var n=this.__data__;if(n instanceof o){var r=n.__data__;if(!a||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new u(r)}return n.set(e,t),this.size=n.size,this}},function(e,t,n){var r=n(18),o=n(51),a=n(20),u=n(21),i=/^\[object .+?Constructor\]$/,s=Function.prototype,f=Object.prototype,c=s.toString,l=f.hasOwnProperty,d=RegExp("^"+c.call(l).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=function(e){return!(!a(e)||o(e))&&(r(e)?d:i).test(u(e))}},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){var r=n(14),o=Object.prototype,a=o.hasOwnProperty,u=o.toString,i=r?r.toStringTag:void 0;e.exports=function(e){var t=a.call(e,i),n=e[i];try{var r=!(e[i]=void 0)}catch(e){}var o=u.call(e);return r&&(t?e[i]=n:delete e[i]),o}},function(e,t){var n=Object.prototype.toString;e.exports=function(e){return n.call(e)}},function(e,t,n){var r,o=n(52),a=(r=/[^.]+$/.exec(o&&o.keys&&o.keys.IE_PROTO||""))?"Symbol(src)_1."+r:"";e.exports=function(e){return!!a&&a in e}},function(e,t,n){var r=n(0)["__core-js_shared__"];e.exports=r},function(e,t){e.exports=function(e,t){return null==e?void 0:e[t]}},function(e,t,n){var r=n(55),o=n(4),a=n(13);e.exports=function(){this.size=0,this.__data__={hash:new r,map:new(a||o),string:new r}}},function(e,t,n){var r=n(56),o=n(57),a=n(58),u=n(59),i=n(60);function s(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}s.prototype.clear=r,s.prototype.delete=o,s.prototype.get=a,s.prototype.has=u,s.prototype.set=i,e.exports=s},function(e,t,n){var r=n(7);e.exports=function(){this.__data__=r?r(null):{},this.size=0}},function(e,t){e.exports=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}},function(e,t,n){var r=n(7),o=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;if(r){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return o.call(t,e)?t[e]:void 0}},function(e,t,n){var r=n(7),o=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;return r?void 0!==t[e]:o.call(t,e)}},function(e,t,n){var r=n(7);e.exports=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=r&&void 0===t?"__lodash_hash_undefined__":t,this}},function(e,t,n){var r=n(8);e.exports=function(e){var t=r(this,e).delete(e);return this.size-=t?1:0,t}},function(e,t){e.exports=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}},function(e,t,n){var r=n(8);e.exports=function(e){return r(this,e).get(e)}},function(e,t,n){var r=n(8);e.exports=function(e){return r(this,e).has(e)}},function(e,t,n){var o=n(8);e.exports=function(e,t){var n=o(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this}},function(e,t,n){var r=n(22),o=n(67),a=n(68);function u(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new r;++t<n;)this.add(e[t])}u.prototype.add=u.prototype.push=o,u.prototype.has=a,e.exports=u},function(e,t){e.exports=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this}},function(e,t){e.exports=function(e){return this.__data__.has(e)}},function(e,t){e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}},function(e,t){e.exports=function(e,t){return e.has(t)}},function(e,t,n){var r=n(14),l=n(72),d=n(17),p=n(23),v=n(73),S=n(74),o=r?r.prototype:void 0,g=o?o.valueOf:void 0;e.exports=function(e,t,n,r,o,a,u){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!a(new l(e),new l(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return d(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var i=v;case"[object Set]":var s=1&r;if(i=i||S,e.size!=t.size&&!s)return!1;var f=u.get(e);if(f)return f==t;r|=2,u.set(e,t);var c=p(i(e),i(t),r,o,a,u);return u.delete(e),c;case"[object Symbol]":if(g)return g.call(e)==g.call(t)}return!1}},function(e,t,n){var r=n(0).Uint8Array;e.exports=r},function(e,t){e.exports=function(e){var n=-1,r=Array(e.size);return e.forEach(function(e,t){r[++n]=[t,e]}),r}},function(e,t){e.exports=function(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=e}),n}},function(e,t,n){var h=n(76),A=Object.prototype.hasOwnProperty;e.exports=function(e,t,n,r,o,a){var u=1&n,i=h(e),s=i.length;if(s!=h(t).length&&!u)return!1;for(var f=s;f--;){var c=i[f];if(!(u?c in t:A.call(t,c)))return!1}var l=a.get(e);if(l&&a.get(t))return l==t;var d=!0;a.set(e,t),a.set(t,e);for(var p=u;++f<s;){var v=e[c=i[f]],S=t[c];if(r)var g=u?r(S,v,c,t,e,a):r(v,S,c,e,t,a);if(!(void 0===g?v===S||o(v,S,n,r,a):g)){d=!1;break}p=p||"constructor"==c}if(d&&!p){var _=e.constructor,b=t.constructor;_!=b&&"constructor"in e&&"constructor"in t&&!("function"==typeof _&&_ instanceof _&&"function"==typeof b&&b instanceof b)&&(d=!1)}return a.delete(e),a.delete(t),d}},function(e,t,n){var r=n(77),o=n(79),a=n(82);e.exports=function(e){return r(e,a,o)}},function(e,t,n){var o=n(78),a=n(15);e.exports=function(e,t,n){var r=t(e);return a(e)?r:o(r,n(e))}},function(e,t){e.exports=function(e,t){for(var n=-1,r=t.length,o=e.length;++n<r;)e[o+n]=t[n];return e}},function(e,t,n){var r=n(80),o=n(81),a=Object.prototype.propertyIsEnumerable,u=Object.getOwnPropertySymbols,i=u?function(t){return null==t?[]:(t=Object(t),r(u(t),function(e){return a.call(t,e)}))}:o;e.exports=i},function(e,t){e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length,o=0,a=[];++n<r;){var u=e[n];t(u,n,e)&&(a[o++]=u)}return a}},function(e,t){e.exports=function(){return[]}},function(e,t,n){var r=n(83),o=n(92),a=n(96);e.exports=function(e){return(a(e)?r:o)(e)}},function(e,t,n){var c=n(84),l=n(85),d=n(15),p=n(24),v=n(88),S=n(26),g=Object.prototype.hasOwnProperty;e.exports=function(e,t){var n=d(e),r=!n&&l(e),o=!n&&!r&&p(e),a=!n&&!r&&!o&&S(e),u=n||r||o||a,i=u?c(e.length,String):[],s=i.length;for(var f in e)!t&&!g.call(e,f)||u&&("length"==f||o&&("offset"==f||"parent"==f)||a&&("buffer"==f||"byteLength"==f||"byteOffset"==f)||v(f,s))||i.push(f);return i}},function(e,t){e.exports=function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}},function(e,t,n){var r=n(86),o=n(9),a=Object.prototype,u=a.hasOwnProperty,i=a.propertyIsEnumerable,s=r(function(){return arguments}())?r:function(e){return o(e)&&u.call(e,"callee")&&!i.call(e,"callee")};e.exports=s},function(e,t,n){var r=n(6),o=n(9);e.exports=function(e){return o(e)&&"[object Arguments]"==r(e)}},function(e,t){e.exports=function(){return!1}},function(e,t){var r=/^(?:0|[1-9]\d*)$/;e.exports=function(e,t){var n=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==n||"symbol"!=n&&r.test(e))&&-1<e&&e%1==0&&e<t}},function(e,t,n){var r=n(6),o=n(27),a=n(9),u={};u["[object Float32Array]"]=u["[object Float64Array]"]=u["[object Int8Array]"]=u["[object Int16Array]"]=u["[object Int32Array]"]=u["[object Uint8Array]"]=u["[object Uint8ClampedArray]"]=u["[object Uint16Array]"]=u["[object Uint32Array]"]=!0,u["[object Arguments]"]=u["[object Array]"]=u["[object ArrayBuffer]"]=u["[object Boolean]"]=u["[object DataView]"]=u["[object Date]"]=u["[object Error]"]=u["[object Function]"]=u["[object Map]"]=u["[object Number]"]=u["[object Object]"]=u["[object RegExp]"]=u["[object Set]"]=u["[object String]"]=u["[object WeakMap]"]=!1,e.exports=function(e){return a(e)&&o(e.length)&&!!u[r(e)]}},function(e,t){e.exports=function(t){return function(e){return t(e)}}},function(e,u,i){(function(e){var t=i(19),n=u&&!u.nodeType&&u,r=n&&"object"==typeof e&&e&&!e.nodeType&&e,o=r&&r.exports===n&&t.process,a=function(){try{return r&&r.require&&r.require("util").types||o&&o.binding&&o.binding("util")}catch(e){}}();e.exports=a}).call(this,i(25)(e))},function(e,t,n){var r=n(93),o=n(94),a=Object.prototype.hasOwnProperty;e.exports=function(e){if(!r(e))return o(e);var t=[];for(var n in Object(e))a.call(e,n)&&"constructor"!=n&&t.push(n);return t}},function(e,t){var n=Object.prototype;e.exports=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||n)}},function(e,t,n){var r=n(95)(Object.keys,Object);e.exports=r},function(e,t){e.exports=function(t,n){return function(e){return t(n(e))}}},function(e,t,n){var r=n(18),o=n(27);e.exports=function(e){return null!=e&&o(e.length)&&!r(e)}},function(e,t,n){var r=n(98),o=n(13),a=n(99),u=n(100),i=n(101),s=n(6),f=n(21),c=f(r),l=f(o),d=f(a),p=f(u),v=f(i),S=s;(r&&"[object DataView]"!=S(new r(new ArrayBuffer(1)))||o&&"[object Map]"!=S(new o)||a&&"[object Promise]"!=S(a.resolve())||u&&"[object Set]"!=S(new u)||i&&"[object WeakMap]"!=S(new i))&&(S=function(e){var t=s(e),n="[object Object]"==t?e.constructor:void 0,r=n?f(n):"";if(r)switch(r){case c:return"[object DataView]";case l:return"[object Map]";case d:return"[object Promise]";case p:return"[object Set]";case v:return"[object WeakMap]"}return t}),e.exports=S},function(e,t,n){var r=n(2)(n(0),"DataView");e.exports=r},function(e,t,n){var r=n(2)(n(0),"Promise");e.exports=r},function(e,t,n){var r=n(2)(n(0),"Set");e.exports=r},function(e,t,n){var r=n(2)(n(0),"WeakMap");e.exports=r},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a=r(n(1)),o=r(n(3)),u=r(n(103)),i=r(n(29)),s=r(n(11)),f=r(n(16)),c=(l.connect=function(){if(WebSocket){var n=new u.default,t=!1;n.onopen=function(){if(!t){console.log("Leanplum: Connected to development server.");var e={};e[a.default.PARAMS.APP_ID]=s.default.appId,e[a.default.PARAMS.DEVICE_ID]=s.default.deviceId,n.send("auth",e),t=!0}},n.onerror=function(e){console.log("Leanplum: Socket error",e)},n.onmessage=function(e,t){"updateVars"===e?s.default.request(a.default.METHODS.GET_VARS,(new o.default).add(a.default.PARAMS.INCLUDE_DEFAULTS,!1),{queued:!1,sendNow:!0,response:function(e){var t=s.default.getLastResponse(e),n=t[a.default.KEYS.VARS],r=t[a.default.KEYS.VARIANTS],o=t[a.default.KEYS.ACTION_METADATA];f.default(n,i.default.diffs)||i.default.applyDiffs(n,r,o)}}):"getVariables"===e?(i.default.sendVariables(),n.send("getContentResponse",{updated:!0})):"getActions"===e?n.send("getContentResponse",{updated:!1}):"registerDevice"===e&&alert("Your device has been registered to "+t[0].email+".")},n.onclose=function(){console.log("Leanplum: Disconnected to development server."),t=!1},n.connect(l.socketHost),setInterval(function(){n.connected||n.connecting||n.connect(l.socketHost)},5e3)}else console.log("Your browser doesn't support WebSockets.")},l.socketHost="dev.leanplum.com",l);function l(){}t.default=c},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=r(n(28)),a=(u.prototype.connect=function(a){var i=this;i.connecting=!0,o.default.ajax("POST","https://"+a+"/socket.io/1","",function(e){var t=e.split(":"),n=t[0],r=parseInt(t[1])/2*1e3;i.socket=new WebSocket("wss://"+a+"/socket.io/1/websocket/"+n);var o=null;i.socket.onopen=function(){i.connected=!0,i.connecting=!1,i.onopen&&i.onopen(),o=setInterval(function(){i.socket.send("2:::")},r)},i.socket.onclose=function(){i.connected=!1,clearInterval(o),i.onclose&&i.onclose()},i.socket.onmessage=function(e){var t=e.data.split(":"),n=parseInt(t[0]);if(2===n)i.socket.send("2::");else if(5===n){var r=t[1],o=JSON.parse(t.slice(3).join(":")),a=o.name,u=o.args;r&&i.socket.send("6:::"+r),i.onmessage&&i.onmessage(a,u)}else 7===n&&console.log("Socket error: "+e.data)},i.socket.onerror=function(e){i.socket.close(),i.onerror&&i.onerror(e)}},null,!1,!0)},u.prototype.send=function(e,t){if(this.connected){var n=JSON.stringify({name:e,args:t});this.socket.send("5:::"+n)}else console.log("Leanplum: Socket is not connected.")},u);function u(){this.connected=!1,this.connecting=!1,this.connected=!1,this.connecting=!1}t.default=a}],o.c=r,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)o.d(n,r,function(e){return t[e]}.bind(null,r));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=30);function o(e){if(r[e])return r[e].exports;var t=r[e]={i:e,l:!1,exports:{}};return n[e].call(t.exports,t,t.exports,o),t.l=!0,t.exports}var n,r});